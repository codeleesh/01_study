# [Database] 이상 현상 개념 정리

최근 회사에서 테이블  `정규화` 를 진행하게 되면서 관련 키워드를 정리를 하게 되었습니다. 그러다보니 관련 개념으로  `이상 현상` 이 나오게 되었고 이것 또한 정리가 필요하다고 느껴졌습니다.



## 이상 현상(Anomaly)

특정 테이블을 조작함에 있어서 데이터 불일치 / 누락이 발생하는 현상입니다.

이상 현상의 종류는 다음과 같이 3가지로 나눌수 있습니다.



### 이상 현상의 종류

- 삽입 이상 (Insertion Anomaly)
- 갱신 이상 (Update Anomaly)
- 삭제 이상 (Deletion Anomaly)

이상 현상 종류의 특징에 대해서 이해를 돕기 위해서 아래 학사 관리 시스템의 테이블을 토대로 설명을 하겠습니다.

| 학번 | 이름   | 전공     | 수강과목     | 전화번호      | 주소 |
| ---- | ------ | -------- | ------------ | ------------- | ---- |
| 1    | 홍길동 | 무역학과 | 무역학개론   | 010-1111-2222 | 서울 |
| 2    | 둘리   | 회계학과 | 전산개론     | 010-8888-9999 | 인천 |
| 2    | 둘리   | 회계학과 | 회계학개론   | 010-8888-9999 | 인천 |
| 3    | 손오공 | 개발     | 운영체제     | 010-3333-4444 | 부산 |
| 3    | 손오공 | 개발     | 데이터베이스 | 010-3333-4444 | 부산 |



### 삽입 이상 (Insertion Anomaly)

신규 데이터 생성시 불필요한 데이터를 입력해야 하는 문제입니다.

예를 들어, 미수강 학생을 등록하기 위해서는 수강과목이 `null` 로 들어가야 하는 문제가 발생합니다.



### 갱신 이상 (Update Anomaly)

중복된 여러 Row 데이터 중 일부만 수정되어 데이터의 불일치가 발생하는 문제입니다.

예를 들어, 둘리 학생의 전화번호와 주소가 변경된다면 둘리 학생이 수강하는 모든 수강과목에서의 전화번호와 주소를 변경해야 하는 문제가 발생합니다.



### 삭제 이상 (Deletion Anomaly)

어떤 데이터를 삭제하면 그와 함께 유용한 데이터도 함께 삭제되는 문제입니다.

예를 들어, 홍길동 학생이 무역학개론 과목을 수강취소한다면, 해당 정보만 삭제되는 것이 아닌 전화번화, 주소 등 지우고 싶지 않은 필드들의 정보도 같이 지워야 하는 문제가 발생합니다.



### 이상 현상 해결책

이러한 이상 현상이 발생하였을 때는 정규화 작업을 통해서 해결할 수 있습니다.

예를 들어, 변경을 해야 한다면 둘리 학생의 정보를 관리하는 테이블과 둘리 학생이 수강하는 과목을 관리하는 테이블을 둘로 나누는 방법이 있습니다. 



## 결론

데이터 베이스 설계가 잘못 되면, 데이터가 중복으로 저장될 수 있습니다. 이렇게 되면, 불필요한 리소스가 소요되고, 운영을 하면서 의도치 않은 부작용이 발생할 수 있습니다.

사실 실제 현업에서는 위와 같이 단순한 내용이 아니고 더 복잡한 테이블들을 만나게 됩니다. 그렇기 때문에 이상 현상 자체를 체크하기가 쉽지는 않을텐데요, 그렇기 때문에 해당 개념을 항상 숙지하고 있어서 이와 같은 현상이 발생했을때 리팩토링의 대한 부분으로 생각할 수 있도록 하기 위해서 정리합니다.