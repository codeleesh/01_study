# [Database] 정규화 개념 정리

회사에서 개발중인 웹 프로그램의 데이터베이스를 살펴보다가 개선이 필요한 부분을 찾게 되면서 정규화가 필요하다고 판단이 되었고 정규화의 대해서 정리를 하려고 합니다.



## 정규화란?

관계형 데이터베이스 설계시 중복을 최소화하도록 데이터를 구조화 하는 작업을 말합니다.

정규화를 하는 이유는 `이상현상`이 존재하면 테이블을 분해하여 여러 개의 테이블을 생성하는 과정을 의미합니다. 테이블은 분해되는 정보에 따라 정규형 단계로 나누어지며 정규형이 높아질수록 이상현상은 줄어듭니다.



## 정규화 종류

- 제1 정규형
- 제2 정규형
- 제3 정규형
- BCNF 정규형
- 제4 정규형
- 제5 정규형



## 정규화 방법

기본적으로 높은 차수의 정규형은 낮은 차수의 정규형을 모두 만족하여야 합니다.  즉, 제3정규형은 제1, 2 정규형의 조건을 모두 만족하여야 하며, BCNF는 1, 2, 3 정규형을 기본적으로 모두 만족하고 있어야 합니다.



### 제1 정규형

1NF 또는 1 Normal Form 으로 불립니다.

중복되는 항목이 없어야 합니다. 테이블의 컬럼이 `원자값` 을 갖도록 테이블을 분해하는 것입니다.

다음 사용자 테이블이 존재합니다.

user *table*

| 취미 아이디 | 이름   | 취미       |
| ----------- | ------ | ---------- |
| 1           | 홍길동 | 게임       |
| 2           | 둘리   | 음악       |
| 3           | 손오공 | 당구, 볼링 |

해당 테이블에서 손오공은 취미가 2개를 갖고 있기 때문에 제1 정규형을 만족하지 못하고 있습니다.

그래서, 다음과 같이 2개의 테이블로 나눌 수 있습니다.

*user table*

| 사용자 아이디 | 이름   |
| ------------- | ------ |
| 1             | 홍길동 |
| 2             | 둘리   |
| 3             | 손오공 |

*hobby table*

| 취미 아이디 | 이름   | 취미 |
| ----------- | ------ | ---- |
| 1           | 홍길동 | 게임 |
| 2           | 둘리   | 음악 |
| 3           | 손오공 | 당구 |
| 4           | 손오공 | 볼링 |

기존 사용자 테이블에서 취미 필드를 따로 분리하여 새로운 취미 테이블로 변경하는 것입니다.

그리고 취미 필드가 `원자값` 을 보장하도록 행단위로 분리하였습니다.



### 제2 정규형

2NF, 2 Normal Form 으로 불립니다.

제1 정규형을 만족해야 하며, 기본키가 아닌 속성이 기본키에 완전 함수 종속일 때를 의미합니다.

다음과 같이 학사 테이블이 있다고 가정을 해봅시다.

Bachelor *table*

| 학번 | 이름   | 전공     | 수강과목     | 전화번호      | 주소 | 학점 | 담당 교수 |
| ---- | ------ | -------- | ------------ | ------------- | ---- | ---- | --------- |
| 1    | 홍길동 | 무역학과 | 무역학개론   | 010-1111-2222 | 서울 | A    | 삼장법사  |
| 2    | 둘리   | 회계학과 | 전산개론     | 010-8888-9999 | 인천 | B    | 고길동    |
| 2    | 둘리   | 회계학과 | 회계학개론   | 010-8888-9999 | 인천 | A    | 마이콜    |
| 3    | 손오공 | 개발     | 운영체제     | 010-3333-4444 | 부산 | A    | 무천도사  |
| 3    | 손오공 | 개발     | 데이터베이스 | 010-3333-4444 | 부산 | C    | 덴데      |

위 테이블의 관계를 정리하면 다음과 같습니다.

*완전 함수 종속 관계*

- 학번, 수강과목 → 학점

*부분적 함수 종속 관계*

- 학번 → 이름, 전공, 전화번호, 주소

- 수강과목 → 담당 교수

- 참고

  완전 함수 종속성이 되기 위해서는 복합키여야 합니다. 그래서 제1 정규형을 만족하고 단일키라면 제 2정규형까지 만족하게 됩니다.

그래서, 부분적 함수적 종속 관계를 제거하고 완전 함수 종속 관계로 만들기 위해서는 다음과 같이 3개의 테이블로 나눌수 있습니다.

Student *Table*

| 학번 | 이름   | 전공     | 전화번호      | 주소 |
| ---- | ------ | -------- | ------------- | ---- |
| 1    | 홍길동 | 무역학과 | 010-1111-2222 | 서울 |
| 2    | 둘리   | 회계학과 | 010-8888-9999 | 인천 |
| 3    | 손오공 | 개발     | 010-3333-4444 | 부산 |

Grades *Table*

| 학번 | 수강과목     | 학점 |
| ---- | ------------ | ---- |
| 1    | 무역학개론   | A    |
| 2    | 전산개론     | B    |
| 2    | 회계학개론   | A    |
| 3    | 운영체제     | A    |
| 3    | 데이터베이스 | C    |

*Subject Table*

| 수강과목     | 담당교수 |
| ------------ | -------- |
| 무역학개론   | 삼장법사 |
| 전산개론     | 고길동   |
| 회계학개론   | 마이콜   |
| 운영체제     | 무천도사 |
| 데이터베이스 | 덴데     |

완전 함수 종속 관계인 `Grades`  테이블과 부분적 함수 종속 관계인 `Student` 테이블과 `Subject` 테이블로 나누게 되면서 모든 테이블이 완전 함수 종속 관계를 만족하게 됩니다.



### 제3 정규형

3NF, 3 Normal Form 으로 불립니다.

제 1정규형과 제 2정규형을 만족해야 하며, 이행적 함수 종속을 없애도록 테이블을 분해하는 것입니다.

- 이행적 함수 종속이란?

  A → B, B → C 가 성립할 때, A → C 가 성립되는 것을 의미합니다.

다음 사원을 관리하는 테이블이 존재합니다.

| 사용자 아이디 | 이름   | 부서 아이디 | 부서명 |
| ------------- | ------ | ----------- | ------ |
| 1             | 홍길동 | DEV         | 개발   |
| 2             | 둘리   | HR          | 인사   |
| 3             | 손오공 | FIN         | 회계   |



### BCNF 정규형

결정자이면서 후보키가 아닌 것 제거



### 제4 정규형

다치 종속 제거



### 제5 정규형

조인 종속성 이용



https://gomcine.tistory.com/entry/Database-9-데이터베이스-정규화-개념-및-방법

https://mangkyu.tistory.com/110